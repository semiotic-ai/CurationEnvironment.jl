<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · CurationEnvironment.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://semiotic-ai/CurationEnvironment.jl/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="democards/listtheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href>CurationEnvironment.jl</a></span></div><form class="docs-search" action="search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li class="is-active"><a class="tocitem" href>Home</a></li><li><a class="tocitem" href="experiments/">Experiments</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Home</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Home</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/main/docs/src/index.md#" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="CurationEnvironment"><a class="docs-heading-anchor" href="#CurationEnvironment">CurationEnvironment</a><a id="CurationEnvironment-1"></a><a class="docs-heading-anchor-permalink" href="#CurationEnvironment" title="Permalink"></a></h1><p>Documentation for <a href="https://github.com/Semiotic Labs/CurationEnvironment.jl">CurationEnvironment</a>.</p><ul><li><a href="#CurationEnvironment.AbstractCurator"><code>CurationEnvironment.AbstractCurator</code></a></li><li><a href="#CurationEnvironment.Auction"><code>CurationEnvironment.Auction</code></a></li><li><a href="#CurationEnvironment.Bid"><code>CurationEnvironment.Bid</code></a></li><li><a href="#CurationEnvironment.CRSPE"><code>CurationEnvironment.CRSPE</code></a></li><li><a href="#CurationEnvironment.CommunitySignal"><code>CurationEnvironment.CommunitySignal</code></a></li><li><a href="#CurationEnvironment.CurationModel"><code>CurationEnvironment.CurationModel</code></a></li><li><a href="#CurationEnvironment.Curator"><code>CurationEnvironment.Curator</code></a></li><li><a href="#CurationEnvironment.DoubleCRSPE"><code>CurationEnvironment.DoubleCRSPE</code></a></li><li><a href="#CurationEnvironment.GraphEntity"><code>CurationEnvironment.GraphEntity</code></a></li><li><a href="#CurationEnvironment.MinMaxCurator"><code>CurationEnvironment.MinMaxCurator</code></a></li><li><a href="#CurationEnvironment.Subgraph"><code>CurationEnvironment.Subgraph</code></a></li><li><a href="#CurationEnvironment.auction-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph, Transaction}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.auction</code></a></li><li><a href="#CurationEnvironment.best_response-Tuple{CommunitySignal, MinMaxCurator, Subgraph}"><code>CurationEnvironment.best_response</code></a></li><li><a href="#CurationEnvironment.best_response-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}"><code>CurationEnvironment.best_response</code></a></li><li><a href="#CurationEnvironment.best_response-Tuple{CRSPE{CommunitySignal}, MinMaxCurator, Subgraph}"><code>CurationEnvironment.best_response</code></a></li><li><a href="#CurationEnvironment.burnshares-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.burnshares</code></a></li><li><a href="#CurationEnvironment.burntokens-Union{Tuple{C}, Tuple{T}, Tuple{DoubleCRSPE, Vector{T}, Vector{C}, Subgraph}} where {T&lt;:Real, C&lt;:Curator}"><code>CurationEnvironment.burntokens</code></a></li><li><a href="#CurationEnvironment.curate-Tuple{Model, Real, CurationEnvironment.AbstractCurator, Subgraph}"><code>CurationEnvironment.curate</code></a></li><li><a href="#CurationEnvironment.equity_proportion-Tuple{CommunitySignal, Real, Real, Real}"><code>CurationEnvironment.equity_proportion</code></a></li><li><a href="#CurationEnvironment.equity_proportion-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.equity_proportion</code></a></li><li><a href="#CurationEnvironment.latefees-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.latefees</code></a></li><li><a href="#CurationEnvironment.mintshares-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.mintshares</code></a></li><li><a href="#CurationEnvironment.payment-Tuple{CommunitySignal, Real, Real, Real}"><code>CurationEnvironment.payment</code></a></li><li><a href="#CurationEnvironment.payment-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.payment</code></a></li><li><a href="#CurationEnvironment.pmax-Tuple{CommunitySignal, Real, Real, Real, Real, Real}"><code>CurationEnvironment.pmax</code></a></li><li><a href="#CurationEnvironment.popt-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}"><code>CurationEnvironment.popt</code></a></li><li><a href="#CurationEnvironment.shares-Tuple{CommunitySignal, Real, Real, Real, Real}"><code>CurationEnvironment.shares</code></a></li><li><a href="#CurationEnvironment.shares-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.shares</code></a></li><li><a href="#CurationEnvironment.step-Union{Tuple{C}, Tuple{F}, Tuple{DoubleCRSPE, Vector{F}, Vector{C}, Subgraph}} where {F&lt;:Function, C&lt;:Curator}"><code>CurationEnvironment.step</code></a></li><li><a href="#CurationEnvironment.step-Union{Tuple{A}, Tuple{F}, Tuple{CommunitySignal, F, Tuple{Vararg{A}}, Subgraph}} where {F&lt;:Function, A&lt;:CurationEnvironment.AbstractCurator}"><code>CurationEnvironment.step</code></a></li><li><a href="#CurationEnvironment.step-Union{Tuple{F}, Tuple{CommunitySignal, F, CurationEnvironment.AbstractCurator, Subgraph}} where F&lt;:Function"><code>CurationEnvironment.step</code></a></li><li><a href="#CurationEnvironment.step-Union{Tuple{C}, Tuple{F}, Tuple{CRSPE, Vector{F}, Vector{C}, Subgraph}} where {F&lt;:Function, C&lt;:CurationEnvironment.AbstractCurator}"><code>CurationEnvironment.step</code></a></li><li><a href="#CurationEnvironment.utility-Tuple{CommunitySignal, Real, MinMaxCurator, Subgraph}"><code>CurationEnvironment.utility</code></a></li><li><a href="#CurationEnvironment.utility-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}"><code>CurationEnvironment.utility</code></a></li><li><a href="#CurationEnvironment.winner-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph, Transaction}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.winner</code></a></li></ul><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.AbstractCurator" href="#CurationEnvironment.AbstractCurator"><code>CurationEnvironment.AbstractCurator</code></a> — <span class="docstring-category">Type</span></header><section><div><p><code>AbstractCurator</code> is the abstract type for all curators.</p><p>All properties of an <code>AbstractCurator</code> will have an associated getter and setter. For example, the <a href="#CurationEnvironment.Curator"><code>Curator</code></a> concretion has methods: <code>id</code>, <code>v̂s</code>, <code>ςs</code>, and <code>σ</code>. If you pass in only the <code>AbstractCurator</code>, or for some fields, the <code>AbstractCurator</code> and an index <code>i</code>, then the method serves as a getter. If you pass in a value <code>v</code> in addition to the parameters of the getters, the method serves as a setter.</p><p>See also <a href="#CurationEnvironment.Curator"><code>Curator</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/curator.jl#L4-L15">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.Auction" href="#CurationEnvironment.Auction"><code>CurationEnvironment.Auction</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Wrap a <a href="#CurationEnvironment.CurationModel"><code>CurationModel</code></a> in an auction.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/domainmodel.jl#L9">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.Bid" href="#CurationEnvironment.Bid"><code>CurationEnvironment.Bid</code></a> — <span class="docstring-category">Type</span></header><section><div><p>The bid in an <a href="#CurationEnvironment.Auction"><code>Auction</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/domainmodel.jl#L12">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.CRSPE" href="#CurationEnvironment.CRSPE"><code>CurationEnvironment.CRSPE</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CRSPE &lt;: Auction</code></pre><p>A commit-reveal, second price auction has three stages:</p><ol><li>Bid: Each participant privately bids (perhaps multiple times) via hash</li></ol><p>commitment(s).</p><ol><li>Reveal: Bidders (optionally) deposit tokens equal to their bid with a</li></ol><p>hash verification.</p><ol><li>Allocate: The highest bidder is reimbursed the difference between their</li></ol><p>bid and the second highest bid and allocated shares in proportion to their payment. All others are reimbursed for their deposits.</p><p><strong>Constructors</strong></p><pre><code class="language-julia hljs">CRSPE{M&lt;:Model}(m::M)
CRSPE(m::M)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/crspe.jl#L3-L22">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.CommunitySignal" href="#CurationEnvironment.CommunitySignal"><code>CurationEnvironment.CommunitySignal</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">CommunitySignal &lt;: CurationModel</code></pre><p>Reflect idea of of individuals contributing to a community asset.</p><p>Under this model, curators contribute tokens to the subgraph signal, which entitles them to shares. The shares entitle curators to rewards. Shares are created (minted) whenever a curator pays into the subgraph. Shares are destroyed (burned) whenever a curator withdraws funds from the subgraph.</p><p>Part of curation involves encouraging people to curate early, rather than to curate just before query fees come in. In the community signal model, we encourage early curation via a late fee, a small percentage which decreases the effectiveness of your current payment based on the amount already on the subgraph. The late fee amount is distributed to all curators who had entered before you, thus rewarding them for being early.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L3-L21">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.CurationModel" href="#CurationEnvironment.CurationModel"><code>CurationEnvironment.CurationModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Dynamics governing the interaction between a <a href="#CurationEnvironment.Subgraph"><code>Subgraph</code></a> and a <a href="#CurationEnvironment.Curator"><code>Curator</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/domainmodel.jl#L6">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.Curator" href="#CurationEnvironment.Curator"><code>CurationEnvironment.Curator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Curator{M,S,T} &lt;: AbstractCurator</code></pre><p>Signal tokens on a <a href="#CurationEnvironment.Subgraph"><code>Subgraph</code></a> as per a private valuation.</p><p><code>Curator</code> is an entity that signals tokens on a <a href="#CurationEnvironment.Subgraph"><code>Subgraph</code></a> to demonstrate the value of the subgraph to indexers. Curators are paid via query fees when on a subgraph. Curator <code>id</code> estimates the subgraph valuations as <code>v̂s</code> and owns <code>ςs</code> shares on each subgraph. The curator has <code>σ</code> stake to spend.</p><p><strong>Constructors</strong></p><pre><code class="language-julia hljs">Curator{M,S,T}(
    id::&lt;:Integer,
    vs::NTuple{M,T},
    ςs::NTuple{M,T},
    σ::T
) where {S&lt;:Integer, T&lt;:Real}

Curator{M}(id::&lt;:Integer, ̂vs::NTuple{M,&lt;:Real}, ςs::NTuple{M,&lt;:Real}, σ::&lt;:Real)
Curator(id::&lt;:Integer, ̂vs::NTuple{M,&lt;:Real}, ςs::NTuple{M,&lt;:Real}, σ::&lt;:Real)
Curator{M}(id::&lt;:Integer, ̂v::&lt;:Real, ς::&lt;:Real, σ::&lt;:Real)</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/curator.jl#L18-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.DoubleCRSPE" href="#CurationEnvironment.DoubleCRSPE"><code>CurationEnvironment.DoubleCRSPE</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">DoubleCRSPE(m::CRSPE)</code></pre><p>The difference between <code>DoubleCRSPE</code> and <a href="#CurationEnvironment.CRSPE"><code>CRSPE</code></a> is that in <code>DoubleCRSPE</code>, we burn tokens as per a CRSPE auction as well.</p><p>This can be constructed by bypassing <code>CRSPE</code> and directly specifying the <a href="#CurationEnvironment.CurationModel"><code>CurationModel</code></a>. <code>DoubleCRSPE(CommunitySignal())</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/doublecrspe.jl#L3-L11">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.GraphEntity" href="#CurationEnvironment.GraphEntity"><code>CurationEnvironment.GraphEntity</code></a> — <span class="docstring-category">Type</span></header><section><div><p>A type of entity that interacts with The Graph protocol.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/domainmodel.jl#L27">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.MinMaxCurator" href="#CurationEnvironment.MinMaxCurator"><code>CurationEnvironment.MinMaxCurator</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">MinMaxCurator{M,S,T} &lt;: AbstractCurator</code></pre><p>A curator that has both a min and max valuation.</p><p><code>MinMaxCurator</code> is a <a href="#CurationEnvironment.Curator"><code>Curator</code></a> that has both a minimum valuation for each subgraph <code>v̂mins</code> and a maximum valuation per subgraph <code>v̂maxs</code>. Intuitively, <code>v̂min</code> for a subgraph is the minimum amount of signal you would want to see on a subgraph. <code>v̂max</code> is your true valuation of the subgraph. The other parameters are as given by <a href="#CurationEnvironment.Curator"><code>Curator</code></a>.</p><p><strong>Constructors</strong></p><pre><code class="language-julia hljs">MinMaxCurator(
    id::&lt;:Integer,
    v̂mins::NTuple{M,&lt;:Real},
    v̂maxs::NTuple{M,&lt;:Real},
    ςs::NTuple{M,&lt;:Real},
    σ::&lt;:Real
) where {M}

MinMaxCurator{M,S,T}(
    id::S,
    v̂mins::NTuple{M,T},
    v̂maxs::NTuple{M,T},
    ςs::NTuple{M,T},
    σ::T
) where {M,S&lt;:Integer,T&lt;:Real}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/curator.jl#L94-L123">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.Subgraph" href="#CurationEnvironment.Subgraph"><code>CurationEnvironment.Subgraph</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">Subgraph &lt;: GraphEntity</code></pre><p>Blockchain data is organised into subgraphs.</p><p><code>Subgraph</code> is an entity on which curators signal tokens. Subgraph <code>id</code> has signal <code>v</code>, shares <code>ς</code> and late fee parameter of <code>τ</code>. <code>τ</code> is related to the late fee rate by <a href="@ref"><code>τ</code></a>.</p><p><strong>Constructors</strong></p><pre><code class="language-julia hljs">Subgraph{S,T}(id::S, v::T, ς::T, τ::T) where {S&lt;:Integer,T&lt;:Real}
Subgraph(id::&lt;:Integer, v::&lt;:Real, ς::&lt;:Real, τ::&lt;:Real)</code></pre><p>See also <a href="#CurationEnvironment.Curator"><code>Curator</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/subgraph.jl#L3-L19">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.auction-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph, Transaction}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}" href="#CurationEnvironment.auction-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph, Transaction}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.auction</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">auction(m::CRSPE, bids::StructArray{&lt;:CRSPEBid}, cs::Vector{&lt;:MinMaxCurator}, s::Subgraph, t::Transaction)</code></pre><p>Runs a commit-reveal second-price auction to select which bid wins the right to curate on the subgraph. The curators <code>cs</code> make transactions <code>t</code> based on <code>bids</code> on the subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/crspe.jl#L74-L79">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.best_response-Tuple{CRSPE{CommunitySignal}, MinMaxCurator, Subgraph}" href="#CurationEnvironment.best_response-Tuple{CRSPE{CommunitySignal}, MinMaxCurator, Subgraph}"><code>CurationEnvironment.best_response</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">best_response(m::CRSPE{CommunitySignal}, c::MinMaxCurator, s::Subgraph)</code></pre><p>Find the best response for the min-max curator <code>c</code> on subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/crspe.jl#L37-L41">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.best_response-Tuple{CommunitySignal, MinMaxCurator, Subgraph}" href="#CurationEnvironment.best_response-Tuple{CommunitySignal, MinMaxCurator, Subgraph}"><code>CurationEnvironment.best_response</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">best_response(m::CommunitySignal, c::MinMaxCurator, s::Subgraph)</code></pre><p>Find the best response for the min-max curator <code>c</code> on subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L79-L83">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.best_response-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}" href="#CurationEnvironment.best_response-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}"><code>CurationEnvironment.best_response</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">best_response(m::CommunitySignal, v::Real, v̂min::Real,
              v̂max::Real τ::Real, ξ::Real, σ::Real)</code></pre><p>Find the best response on the community signal model for a subgraph with signal <code>v</code> and tax rate <code>τ</code> given the min-max curator believes the true value of the subgraph to be in the range <code>v̂min</code> and <code>v̂max</code>. The curator has the ratio <code>ξ</code> of the total shares on the subgraph and available stake <code>σ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L63-L71">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.burnshares-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}" href="#CurationEnvironment.burnshares-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.burnshares</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">burnshares(m::CRSPE, ps::StructArray{&lt;:CRSPEBid}, cs::Vector{&lt;:MinMaxCurator}, s::Subgraph)</code></pre><p>Curators <code>cs</code> who have negative payment in <code>ps</code> will burn shares on the subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/crspe.jl#L103-L107">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.burntokens-Union{Tuple{C}, Tuple{T}, Tuple{DoubleCRSPE, Vector{T}, Vector{C}, Subgraph}} where {T&lt;:Real, C&lt;:Curator}" href="#CurationEnvironment.burntokens-Union{Tuple{C}, Tuple{T}, Tuple{DoubleCRSPE, Vector{T}, Vector{C}, Subgraph}} where {T&lt;:Real, C&lt;:Curator}"><code>CurationEnvironment.burntokens</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">burntokens(m::DoubleCRSPE, ps::Vector{&lt;:Real}, cs::Vector{&lt;:Curator}, s::Subgraph)</code></pre><p>Curators <code>cs</code> who have negative payment in <code>ps</code> will burn tokens on the subgraph <code>s</code>. In a DoubleCRSPE auction, they will burn tokens in a CRSPE auction.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/doublecrspe.jl#L21-L26">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.curate-Tuple{Model, Real, CurationEnvironment.AbstractCurator, Subgraph}" href="#CurationEnvironment.curate-Tuple{Model, Real, CurationEnvironment.AbstractCurator, Subgraph}"><code>CurationEnvironment.curate</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">curate(m::Model, p::Real, c::Curator, s::Subgraph)</code></pre><p>A curator <code>c</code> curates tokens <code>p</code> on subgraph <code>s</code> as per model <code>m</code>.</p><p>See also <a href="#CurationEnvironment.Subgraph"><code>Subgraph</code></a>, <a href="#CurationEnvironment.Curator"><code>Curator</code></a>, <a href="#CurationEnvironment.CurationModel"><code>CurationModel</code></a></p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/domainmodel.jl#L37-L43">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.equity_proportion-Tuple{CommunitySignal, Real, Real, Real}" href="#CurationEnvironment.equity_proportion-Tuple{CommunitySignal, Real, Real, Real}"><code>CurationEnvironment.equity_proportion</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">equity_proportion(::CommunitySignal, p::Real, v::Real, τ::Real)</code></pre><p>The proportion of equity on a subgraph with signal <code>v</code> the curator will receive by paying amount <code>p</code> with tax rate <code>τ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L188-L193">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.equity_proportion-Tuple{CommunitySignal, Real, Subgraph}" href="#CurationEnvironment.equity_proportion-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.equity_proportion</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">equity_proportion(model::CommunitySignal, p::Real, s::Subgraph)</code></pre><p>The proportion of equity on a subgraph <code>s</code> the curator will receive by paying amount <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L203-L208">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.latefees-Tuple{CommunitySignal, Real, Subgraph}" href="#CurationEnvironment.latefees-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.latefees</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">latefees(m::CommunitySignal, p::Real, s::Subgraph)</code></pre><p>The late fees a curator makes for paying <code>p</code> on subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L124-L128">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.mintshares-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}" href="#CurationEnvironment.mintshares-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.mintshares</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">mintshares(m::CRSPE, ps::Vector{&lt;:CRSPEBid}, cs::Vector{&lt;:MinMaxCurator}, s::Subgraph)</code></pre><p>Curators <code>cs</code> who have positive payment in <code>ps</code> will mint shares on the subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/crspe.jl#L91-L95">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.payment-Tuple{CommunitySignal, Real, Real, Real}" href="#CurationEnvironment.payment-Tuple{CommunitySignal, Real, Real, Real}"><code>CurationEnvironment.payment</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">payment(::CommunitySignal, x::Real, v::Real, τ::Real)</code></pre><p>The payment needed to capture or burn <code>x</code> proportion of the equity for a subgraph with valuation <code>v</code> and tax rate <code>τ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L163-L168">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.payment-Tuple{CommunitySignal, Real, Subgraph}" href="#CurationEnvironment.payment-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.payment</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">payment(model::CommunitySignal, x::Real, s::Subgraph)</code></pre><p>The payment needed to capture <code>x</code> proportion of the equity for a subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L178-L183">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.pmax-Tuple{CommunitySignal, Real, Real, Real, Real, Real}" href="#CurationEnvironment.pmax-Tuple{CommunitySignal, Real, Real, Real, Real, Real}"><code>CurationEnvironment.pmax</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">pmax(::CommunitySignal, v::Real, v̂max::Real, τ::Real, ξ::Real, σ::Real)</code></pre><p>The maximum profitable payment.</p><p>The subgraph has signal <code>v</code> and a fee rate <code>τ</code>. The curator has a max valuation of <code>v̂max</code>, stake <code>σ</code> and owns <code>ξ</code> proportion of shares on the subgraph.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L50-L58">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.popt-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}" href="#CurationEnvironment.popt-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}"><code>CurationEnvironment.popt</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">popt(::CommunitySignal, v::Real, v̂min::Real, v̂max::Real, τ::Real, ξ::Real)</code></pre><p>The optimal amount to curate under the community signal model.</p><p>The subgraph has current signal <code>v</code> and fee rate <code>τ</code>. The curator has a min valuation <code>v̂min,  a max valuation</code>v̂max<code>, and stake</code>σ<code>. The curator owns</code>ξ` proportion of the shares on the subgraph.</p><p>See also <a href="#CurationEnvironment.utility-Tuple{CommunitySignal, Real, MinMaxCurator, Subgraph}"><code>utility</code></a>, <a href="#CurationEnvironment.pmax-Tuple{CommunitySignal, Real, Real, Real, Real, Real}"><code>pmax</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L24-L34">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.shares-Tuple{CommunitySignal, Real, Real, Real, Real}" href="#CurationEnvironment.shares-Tuple{CommunitySignal, Real, Real, Real, Real}"><code>CurationEnvironment.shares</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">shares(model::CommunitySignal, x::Real, s::Real, v::Real, τ::Real)</code></pre><p>How many new shares were minted when a curator executes a new transaction for equity proportion <code>x</code> on a subgraph with shares <code>ς</code>, signal <code>v</code> and tax rate <code>τ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L213-L218">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.shares-Tuple{CommunitySignal, Real, Subgraph}" href="#CurationEnvironment.shares-Tuple{CommunitySignal, Real, Subgraph}"><code>CurationEnvironment.shares</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">shares(model::CommunitySignal, x::Real, s::Subgraph)</code></pre><p>How many new shares were minted when a curator executes a new transaction for equity proportion <code>x</code> on a subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L230-L235">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.step-Union{Tuple{A}, Tuple{F}, Tuple{CommunitySignal, F, Tuple{Vararg{A}}, Subgraph}} where {F&lt;:Function, A&lt;:CurationEnvironment.AbstractCurator}" href="#CurationEnvironment.step-Union{Tuple{A}, Tuple{F}, Tuple{CommunitySignal, F, Tuple{Vararg{A}}, Subgraph}} where {F&lt;:Function, A&lt;:CurationEnvironment.AbstractCurator}"><code>CurationEnvironment.step</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">step(m::CommunitySignal, π::Function, c::Tuple{AbstractCurator}, s::Subgraph)</code></pre><p>Curators <code>cs</code> decide how much to curate on subgraph <code>s</code> by running the policy <code>π</code>.</p><p>Note that the order in which the curators execute is randomised each time <code>step</code> is called.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L144-L150">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.step-Union{Tuple{C}, Tuple{F}, Tuple{CRSPE, Vector{F}, Vector{C}, Subgraph}} where {F&lt;:Function, C&lt;:CurationEnvironment.AbstractCurator}" href="#CurationEnvironment.step-Union{Tuple{C}, Tuple{F}, Tuple{CRSPE, Vector{F}, Vector{C}, Subgraph}} where {F&lt;:Function, C&lt;:CurationEnvironment.AbstractCurator}"><code>CurationEnvironment.step</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">step(m::CRSPE, πs::Vector{&lt;:Function}, cs::Vector{&lt;:AbstractCurator}, s::Subgraph) → Tuple{Tuple{Curator}, Subgraph}</code></pre><p>The curators <code>cs</code> bid in a CRSPE auction on subgraph <code>s</code> according to policies <code>πs</code>.</p><p>NOTE: Here, since we use a step function rather than async exec, the policies are executed together. This may be a bad assumption as burning can happen between auctions, whereas minting can only happen at discrete intervals with auctions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/crspe.jl#L121-L129">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.step-Union{Tuple{C}, Tuple{F}, Tuple{DoubleCRSPE, Vector{F}, Vector{C}, Subgraph}} where {F&lt;:Function, C&lt;:Curator}" href="#CurationEnvironment.step-Union{Tuple{C}, Tuple{F}, Tuple{DoubleCRSPE, Vector{F}, Vector{C}, Subgraph}} where {F&lt;:Function, C&lt;:Curator}"><code>CurationEnvironment.step</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">step(m::DoubleCRSPE, πs::Vector{&lt;:Function}, cs::Vector{&lt;:Curator}, s::Subgraph) → Tuple{Tuple{Curator}, Subgraph}</code></pre><p>The curators <code>cs</code> bid in a Double CRSPE auction on subgraph <code>s</code> according to policies <code>πs</code>.</p><p>NOTE: Here, since we use a step function rather than async exec, the policies are executed together. This may be a bad assumption as burning can happen between auctions, whereas minting can only happen at discrete intervals with auctions.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/doublecrspe.jl#L34-L42">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.step-Union{Tuple{F}, Tuple{CommunitySignal, F, CurationEnvironment.AbstractCurator, Subgraph}} where F&lt;:Function" href="#CurationEnvironment.step-Union{Tuple{F}, Tuple{CommunitySignal, F, CurationEnvironment.AbstractCurator, Subgraph}} where F&lt;:Function"><code>CurationEnvironment.step</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">step(m::CommunitySignal, π::Function, c::AbstractCurator, s::Subgraph)</code></pre><p>Curator <code>c</code> decides how much to curate on subgraph <code>s</code> by running the policy <code>π</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L133-L137">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.utility-Tuple{CommunitySignal, Real, MinMaxCurator, Subgraph}" href="#CurationEnvironment.utility-Tuple{CommunitySignal, Real, MinMaxCurator, Subgraph}"><code>CurationEnvironment.utility</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">utility(m::CommunitySignal, p::Real, c::MinMaxCurator, s::Subgraph)</code></pre><p>Utility on for payment <code>p</code> on subgraph <code>s</code> for the min-max curator <code>c</code> for model <code>m</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L111-L115">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.utility-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}" href="#CurationEnvironment.utility-Tuple{CommunitySignal, Real, Real, Real, Real, Real, Real}"><code>CurationEnvironment.utility</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">utility(m::CommunitySignal, p::Real, v̂min::Real, v̂max::Real, v::Real, τ::Real, ξ::Real)</code></pre><p>Utility on for payment <code>p</code> for the min-max curator <code>c</code> for model <code>m</code> for a subgraph with signal <code>v</code> and tax rate <code>τ</code> given the min-max curator believes the true value of the subgraph to be in the range <code>v̂min</code> and <code>v̂max</code>. The curator has the ratio <code>ξ</code> of the total shares on the subgraph and available stake <code>σ</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/communitysignal.jl#L90-L97">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="CurationEnvironment.winner-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph, Transaction}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}" href="#CurationEnvironment.winner-Union{Tuple{C}, Tuple{B}, Tuple{CRSPE, StructArrays.StructArray{B}, Vector{C}, Subgraph, Transaction}} where {B&lt;:CRSPEBid, C&lt;:MinMaxCurator}"><code>CurationEnvironment.winner</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">winner(m::CRSPE, bids::StructArray{&lt;:CRSPEBid}, cs::Vector{&lt;:MinMaxCurator}, s::Subgraph, t::Transaction)</code></pre><p>Find the winner of the auction. The bidder who is willing to pay the most pays the price of the second-highest bid. The bidders <code>cs</code> make transaction <code>t</code> based on <code>bids</code> on the subgraph <code>s</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/semiotic-ai/CurationEnvironment.jl/blob/4e91670733829cbc085521269a73c16405a9351d/src/crspe.jl#L49-L55">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-nextpage" href="experiments/">Experiments »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.22 on <span class="colophon-date" title="Wednesday 3 August 2022 22:38">Wednesday 3 August 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
